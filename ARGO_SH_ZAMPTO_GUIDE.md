# Zamptoç¯å¢ƒé€‚é…ç‰ˆ Argo.sh ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

`argo.sh` æ˜¯ä¸“ä¸º zampto å¹³å°ä¼˜åŒ–çš„ Argo éš§é“éƒ¨ç½²è„šæœ¬ï¼Œè§£å†³äº†åŸ wispbyte argo.sh åœ¨ zampto ç¯å¢ƒä¸­çš„å…¼å®¹æ€§é—®é¢˜ã€‚

## ä¸»è¦ç‰¹æ€§

### âœ… æ ¸å¿ƒåŠŸèƒ½
- **é…ç½®åŠ è½½**: ä» `/home/container/config.json` è¯»å–æ‰€æœ‰å¿…è¦é…ç½®
- **KeepaliveæœåŠ¡å™¨**: ç›‘å¬ `127.0.0.1:27039`ï¼ˆzamptoæŒ‡å®šç«¯å£ï¼‰
- **Cloudflaredéš§é“**: æ”¯æŒå›ºå®šåŸŸåå’Œä¸´æ—¶éš§é“ä¸¤ç§æ¨¡å¼
- **å“ªå’ç›‘æ§**: å¯é€‰ä½†æ¨èçš„ç›‘æ§æœåŠ¡
- **é”™è¯¯å¤„ç†**: ä¼˜é›…çš„é”™è¯¯å¤„ç†ï¼Œéå…³é”®å¤±è´¥ä¸å½±å“ä¸»æµç¨‹

### ğŸ”§ æŠ€æœ¯ç‰¹ç‚¹
- **å¤šæ¶æ„æ”¯æŒ**: x86_64, ARM64, ARMv7
- **æ™ºèƒ½å›é€€**: Python3 â†’ netcat çš„ HTTP æœåŠ¡å™¨å›é€€æœºåˆ¶
- **è¿›ç¨‹ç®¡ç†**: å®Œæ•´çš„ PID ç®¡ç†å’Œæ¸…ç†æœºåˆ¶
- **çŠ¶æ€ç›‘æ§**: å®æ—¶æœåŠ¡çŠ¶æ€æ£€æŸ¥å’ŒæŠ¥å‘Š
- **è¯¦ç»†æ—¥å¿—**: å½©è‰²æ—¥å¿—è¾“å‡ºï¼ŒåŒ…å«æ—¶é—´æˆ³

## é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ä½ç½®
```
/home/container/config.json
```

### é…ç½®å‚æ•°è¯¦è§£

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|------|
| `CF_DOMAIN` | string | å¯é€‰ | å›ºå®šåŸŸåï¼ˆä¸CF_TOKENé…åˆä½¿ç”¨ï¼‰ | `"zampto.xunda.ggff.net"` |
| `CF_TOKEN` | string | å¯é€‰ | Cloudflare API Token | `"account_tag:tunnel_secret:tunnel_id"` |
| `UUID` | string | å¯é€‰ | sing-box èŠ‚ç‚¹ UUID | `"12345678-1234-1234-1234-123456789abc"` |
| `NEZHA_SERVER` | string | å¯é€‰ | å“ªå’ç›‘æ§æœåŠ¡å™¨åœ°å€ | `"nezha.example.com:443"` |
| `NEZHA_PORT` | string | å¯é€‰ | å“ªå’ç›‘æ§ç«¯å£ | `"5555"` |
| `NEZHA_KEY` | string | å¯é€‰ | å“ªå’ç›‘æ§å¯†é’¥ | `"your_nezha_key"` |
| `ARGO_PORT` | string | å¯é€‰ | Argo æœåŠ¡ç«¯å£ | `"27039"` |

### é…ç½®æ–‡ä»¶ç¤ºä¾‹

```json
{
  "CF_DOMAIN": "zampto.xunda.ggff.net",
  "CF_TOKEN": "account_tag:tunnel_secret:tunnel_id",
  "UUID": "12345678-1234-1234-1234-123456789abc",
  "NEZHA_SERVER": "nezha.example.com:443",
  "NEZHA_PORT": "5555",
  "NEZHA_KEY": "your_nezha_key_here",
  "ARGO_PORT": "27039"
}
```

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ä½¿ç”¨

```bash
# ç›´æ¥è¿è¡Œè„šæœ¬
./argo.sh
```

### 2. ä½œä¸ºæœåŠ¡è¿è¡Œ

```bash
# åå°è¿è¡Œ
nohup ./argo.sh > /tmp/argo.log 2>&1 &

# ä½¿ç”¨screenè¿è¡Œ
screen -S argo
./argo.sh
# æŒ‰ Ctrl+A+D åˆ†ç¦»ä¼šè¯
```

### 3. ä¸ start.sh é›†æˆ

```bash
# åœ¨ start.sh ä¸­è°ƒç”¨
#!/bin/bash

# å…¶ä»–åˆå§‹åŒ–...
echo "å¯åŠ¨ zampto æœåŠ¡..."

# è°ƒç”¨ argo.sh
./argo.sh
```

## å·¥ä½œæµç¨‹

### å¯åŠ¨é¡ºåº
1. **é…ç½®åŠ è½½** â†’ è¯»å– `/home/container/config.json`
2. **ç¯å¢ƒå‡†å¤‡** â†’ åˆ›å»ºå·¥ä½œç›®å½•ï¼Œæ£€æµ‹ç³»ç»Ÿæ¶æ„
3. **KeepaliveæœåŠ¡å™¨** â†’ å¯åŠ¨ HTTP æœåŠ¡å™¨ï¼ˆç«¯å£ 27039ï¼‰
4. **Cloudflaredéš§é“** â†’ éƒ¨ç½²éš§é“æœåŠ¡
5. **å“ªå’ç›‘æ§** â†’ å¯é€‰ç›‘æ§æœåŠ¡
6. **å¯é€‰ç»„ä»¶** â†’ TUICã€Node.js Argoï¼ˆå¯é€‰ï¼‰
7. **çŠ¶æ€æ£€æŸ¥** â†’ éªŒè¯æ‰€æœ‰æœåŠ¡çŠ¶æ€
8. **æŒç»­ç›‘æ§** â†’ å®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€

### æœåŠ¡æ¶æ„
```
start.sh
  â†“
argo.sh
  â”œâ”€â”€ Keepalive HTTP Server (127.0.0.1:27039)
  â”œâ”€â”€ Cloudflared Tunnel (å¤–ç½‘ â†’ 127.0.0.1:27039)
  â”œâ”€â”€ Nezha Agent (å¯é€‰)
  â””â”€â”€ Optional Components (å¯é€‰)
```

## é”™è¯¯å¤„ç†

### éè‡´å‘½é”™è¯¯ï¼ˆç»§ç»­æ‰§è¡Œï¼‰
- é…ç½®æ–‡ä»¶ä¸å­˜åœ¨
- å“ªå’ç›‘æ§é…ç½®ç¼ºå¤±
- Node.js ä¸å¯ç”¨
- npm install å¤±è´¥
- git clone å¤±è´¥

### è‡´å‘½é”™è¯¯ï¼ˆåœæ­¢æ‰§è¡Œï¼‰
- å·¥ä½œç›®å½•åˆ›å»ºå¤±è´¥
- Keepalive æœåŠ¡å™¨å¯åŠ¨å¤±è´¥
- Cloudflared ä¸‹è½½å¤±è´¥
- Cloudflared éš§é“å¯åŠ¨å¤±è´¥

## æ—¥å¿—å’Œç›‘æ§

### æ—¥å¿—è¾“å‡ºæ ¼å¼
```
[INFO] 2024-01-01 12:00:00 - å¼€å§‹åŠ è½½é…ç½®æ–‡ä»¶: /home/container/config.json
[WARN] 2024-01-01 12:00:01 - jqå‘½ä»¤ä¸å¯ç”¨ï¼Œå°è¯•æ‰‹åŠ¨è§£æJSON
[SUCCESS] 2024-01-01 12:00:02 - HTTPæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ (PID: 12345)
[ERROR] 2024-01-01 12:00:03 - Cloudflaredä¸‹è½½å¤±è´¥
```

### æ—¥å¿—æ–‡ä»¶ä½ç½®
- **Cloudflaredæ—¥å¿—**: `/tmp/cloudflared.log`
- **è„šæœ¬æ—¥å¿—**: é‡å®šå‘è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶

### PID æ–‡ä»¶
- **KeepaliveæœåŠ¡å™¨**: `/tmp/zampto-argo/keepalive.pid`
- **Cloudflaredéš§é“**: `/tmp/zampto-argo/cloudflared.pid`
- **å“ªå’Agent**: `/tmp/zampto-argo/nezha.pid`
- **Node.js Argo**: `/tmp/zampto-argo/nodejs-argo.pid`
- **éš§é“URL**: `/tmp/zampto-argo/tunnel.url`

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. KeepaliveæœåŠ¡å™¨å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 27039

# æ£€æŸ¥Python3/ncå¯ç”¨æ€§
which python3
which nc

# æ‰‹åŠ¨æµ‹è¯•HTTPæœåŠ¡å™¨
python3 -m http.server 27039 --bind 127.0.0.1
```

#### 2. Cloudflaredéš§é“å¤±è´¥
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
curl -I https://trycloudflare.com

# æ£€æŸ¥cloudflaredäºŒè¿›åˆ¶
/tmp/zampto-argo/bin/cloudflared --version

# æ‰‹åŠ¨æµ‹è¯•éš§é“
/tmp/zampto-argo/bin/cloudflared tunnel --url http://127.0.0.1:27039
```

#### 3. å“ªå’ç›‘æ§è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥æœåŠ¡å™¨è¿é€šæ€§
telnet nezha.example.com 443

# éªŒè¯é…ç½®
echo $NEZHA_SERVER
echo $NEZHA_KEY

# æ‰‹åŠ¨æµ‹è¯•agent
/tmp/zampto-argo/bin/nezha-agent -s nezha.example.com:443 -p your_key -n test
```

#### 4. é…ç½®æ–‡ä»¶è§£æé—®é¢˜
```bash
# éªŒè¯JSONæ ¼å¼
cat /home/container/config.json | python3 -m json.tool

# å®‰è£…jqï¼ˆæ¨èï¼‰
apt-get install jq  # Debian/Ubuntu
apk add jq          # Alpine

# æ‰‹åŠ¨è§£ææµ‹è¯•
grep '"CF_DOMAIN"' /home/container/config.json
```

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export DEBUG=1
./argo.sh

# å•ç‹¬æµ‹è¯•åŠŸèƒ½
bash -x ./argo.sh
```

## æ€§èƒ½ä¼˜åŒ–

### ç³»ç»Ÿèµ„æºä½¿ç”¨
- **å†…å­˜å ç”¨**: ~50MBï¼ˆåŒ…å«æ‰€æœ‰æœåŠ¡ï¼‰
- **CPUä½¿ç”¨**: <5%ï¼ˆç©ºé—²æ—¶ï¼‰
- **ç½‘ç»œå¸¦å®½**: å–å†³äºéš§é“æµé‡

### ä¼˜åŒ–å»ºè®®
1. **ä½¿ç”¨å›ºå®šåŸŸå**: å‡å°‘ä¸´æ—¶åŸŸåè§£æå¼€é”€
2. **å¯ç”¨ç›‘æ§**: åŠæ—¶å‘ç°æœåŠ¡å¼‚å¸¸
3. **å®šæœŸæ¸…ç†**: æ¸…ç†æ—§çš„æ—¥å¿—æ–‡ä»¶
4. **èµ„æºç›‘æ§**: ä½¿ç”¨å“ªå’ç›‘æ§è§‚å¯Ÿèµ„æºä½¿ç”¨

## å®‰å…¨æ³¨æ„äº‹é¡¹

### æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
- é…ç½®æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œç¡®ä¿æƒé™æ­£ç¡®
- ä¸è¦åœ¨æ—¥å¿—ä¸­è¾“å‡ºå®Œæ•´çš„ CF_TOKEN
- å®šæœŸè½®æ¢ API å¯†é’¥

### ç½‘ç»œå®‰å…¨
- KeepaliveæœåŠ¡å™¨ä»…ç›‘å¬æœ¬åœ°åœ°å€
- Cloudflaredæä¾›HTTPSåŠ å¯†
- å“ªå’é€šä¿¡ä½¿ç”¨åŠ å¯†è¿æ¥

## ç‰ˆæœ¬ä¿¡æ¯

- **å½“å‰ç‰ˆæœ¬**: 1.0.0
- **å…¼å®¹å¹³å°**: zampto
- **æ”¯æŒæ¶æ„**: x86_64, ARM64, ARMv7
- **ä¾èµ–å·¥å…·**: curl/wget, python3/nc, git (å¯é€‰)

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-01)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®Œæ•´çš„ zampto ç¯å¢ƒé€‚é…
- âœ… æ”¯æŒå›ºå®šåŸŸåå’Œä¸´æ—¶éš§é“
- âœ… é›†æˆå“ªå’ç›‘æ§
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… å½©è‰²æ—¥å¿—è¾“å‡º
- âœ… è‡ªåŠ¨åŒ–æœåŠ¡ç®¡ç†

## æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. ç³»ç»Ÿæ¶æ„: `uname -a`
2. é…ç½®æ–‡ä»¶: `/home/container/config.json`ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰
3. é”™è¯¯æ—¥å¿—: å®Œæ•´çš„é”™è¯¯è¾“å‡º
4. æœåŠ¡çŠ¶æ€: `ps aux | grep -E "(cloudflared|nezha|python3)"`
5. ç½‘ç»œæµ‹è¯•: `curl -I https://trycloudflare.com`

---

**æ³¨æ„**: æ­¤è„šæœ¬ä¸“ä¸º zampto å¹³å°è®¾è®¡ï¼Œåœ¨å…¶ä»–ç¯å¢ƒä¸­å¯èƒ½éœ€è¦è°ƒæ•´é…ç½®ã€‚